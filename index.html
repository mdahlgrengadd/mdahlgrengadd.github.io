<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>wavesurfer.js examples</title>

  
  </head>

  <body>
    <div id="waveform">
      <!-- the waveform will be rendered here -->
    </div>
    
    <script type="module">
import WaveSurfer from 'https://unpkg.com/wavesurfer.js@7/dist/wavesurfer.esm.js'

const wavesurfer = WaveSurfer.create({
  container: document.body,
  waveColor: 'rgb(200, 0, 200)',
  progressColor: 'rgb(100, 0, 100)',
  url: '/examples/audio/Tune1VSL.mp3',
  audioRate: 2, // set the initial playback rate
})

let preservePitch = true
const speeds = [0.25, 0.5, 1, 2, 4]

// Toggle pitch preservation
document.querySelector('input[type="checkbox"]').addEventListener('change', (e) => {
  preservePitch = e.target.checked
  wavesurfer.setPlaybackRate(wavesurfer.getPlaybackRate(), preservePitch)
})

// Set the playback rate
document.querySelector('input[type="range"]').addEventListener('input', (e) => {
  const speed = speeds[e.target.valueAsNumber]
  document.querySelector('#rate').textContent = speed.toFixed(2)
  wavesurfer.setPlaybackRate(speed, preservePitch)
  wavesurfer.play()
})

// Play/pause
document.querySelector('button').addEventListener('click', () => {
  wavesurfer.playPause()
})
    </script>
  </body>
</html>
